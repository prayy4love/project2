import random

locations = {
    "Лесная поляна": {
        "Описание": "Солнечная поляна, полная сочной травы. В воздухе пахнет цветами. В центре поляны стоит большой дуб с дуплом.",
        "Предметы": ["Морковка", "Трава"],
        "Задача": "Найдите морковку, чтобы подкормить крольчонка, который прячется в дупле дуба.",
        "Крольчонок": True,
        "Лиса": False,
        "Дупло": True
    },
    "Густой лес": {
        "Описание": "Темный и густой лес, где сложно найти дорогу. В ветвях деревьев прячутся птицы, а на земле валяются опавшие листья.",
        "Предметы": ["Ягода", "Лист", "Камень"],
        "Задача": "Найдите ягоду, чтобы отвлечь лису, которая бродит по лесу.",
        "Крольчонок": False,
        "Лиса": True,
        "Дупло": False
    },
    "Речка": {
        "Описание": "Прозрачная речка с быстрым течением. На берегу растут высокие ивы, а в воде плещутся рыбки.",
        "Предметы": ["Камень", "Палочка"],
        "Задача": "Перейдите через речку, используя палку как мостик.",
        "Крольчонок": False,
        "Лиса": False,
        "Дупло": False,
        "Мостик": True
    },
    "Нора": {
        "Описание": "Теплая и уютная нора, где можно спрятаться от опасности. Внутри норы стоит уютный гнездышко из мягкой травы.",
        "Предметы": [],
        "Задача": "Дойдите до норы, чтобы спастись от хитрой лисы.",
        "Крольчонок": False,
        "Лиса": False,
        "Дупло": False,
        "Мостик": False
    }
}

# Игрок
player = {
    "Инвентарь": [],
    "Текущая_локация": "Лесная поляна",
    "Победа": False
}

# Функция для вывода описания локации
def show_location():
    location = locations[player["Текущая_локация"]]
    print(location["Описание"])
    print("В этой локации вы можете найти:")
    for i, item in enumerate(location["Предметы"]):
        print(f"{i+1}. {item}")

# Функция для обработки команд игрока
def process_command(choice):
    global player
    location = locations[player["Текущая_локация"]]
    if choice == 1: # взять
        item_name = input("Какой предмет вы хотите взять? ")
        if item_name in location["Предметы"]:
            player["Инвентарь"].append(item_name)
            location["Предметы"].remove(item_name)
            print(f"Вы взяли {item_name}.")
        else:
            print("Такого предмета нет в локации.")
    elif choice == 2: # использовать
        item_name = input("Какой предмет вы хотите использовать? ")
        if item_name == "Морковка" and location["Крольчонок"] == True and location["Дупло"] == True:
            location["Крольчонок"] = False
            print("Вы подкормили крольчонка морковкой!")
        elif item_name == "Ягода" and location["Лиса"] == True:
            location["Лиса"] = False
            print("Вы отвлекли лису ягодой!")
        elif item_name == "Палочка" and location["Речка"] == True and location["Мостик"] == True:
            location["Мостик"] = False
            print("Вы построили мостик из палки!")
        else:
            print("Этот предмет нельзя использовать здесь.")
    elif choice == 3: # перейти
        if player["Текущая_локация"] == "Лесная поляна" and location["Крольчонок"] == False:
            player["Текущая_локация"] = "Густой лес"
            print("Вы перешли в Густой лес.")
        elif player["Текущая_локация"] == "Густой лес" and location["Лиса"] == False:
            player["Текущая_локация"] = "Речка"
            print("Вы вышли к речке.")
        elif player["Текущая_локация"] == "Речка" and location["Мостик"] == False:
            player["Текущая_локация"] = "Нора"
            print("Вы перешли через речку и добрались до норы!")
        else:
            print("В этом направлении нет пути.")
    elif choice == 4: # выйти
        print("До свидания!")
        exit()
    else:
        print("Неверный выбор.")

# Основной цикл игры
while True:
    show_location()
    print(locations[player["Текущая_локация"]]["Задача"])
    print("\nВыберите действие:")
    print("1. Взять")
    print("2. Использовать")
    print("3. Перейти")
    print("4. Выйти")
    try:
        choice = int(input("Введите номер действия: "))
        process_command(choice)
        if player["Текущая_локация"] == "Нора":
            player["Победа"] = True
            print("Вы добрались до норы и в безопасности! Вы победили!")
            break
    except ValueError:
        print("Некорректный ввод. Введите число.")